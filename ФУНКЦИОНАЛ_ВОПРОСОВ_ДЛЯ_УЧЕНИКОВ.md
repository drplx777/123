# Функционал вопросов для учеников

## Описание функционала

Реализован красивый интерфейс с образовательными вопросами специально для учеников. Система включает в себя:

### ✅ Что реализовано:

#### 1. **9 образовательных вопросов по изучению города:**
1. Объясните историю возникновения и основные этапы развития города
2. Продемонстрируйте на карте роль природных условий и ресурсов в развитии города и жизни горожан
3. Определите социально-экономические факторы развития города
4. Дайте характеристику населению и трудовым ресурсам города
5. Определите народнохозяйственную структуру и функции города
6. Продемонстрируйте на карте внутригородское расселение, или территориальную организацию города
7. Опишите город в системе расселения страны к которой он принадлежит
8. Опишите город и его окружающую среду
9. Выявите перспективы развития

#### 2. **Красивый дизайн интерфейса:**
- Современная плавающая панель с полупрозрачным фоном
- Градиентные кнопки с hover-эффектами
- Анимации и переходы
- Адаптивный дизайн для мобильных устройств
- Стильные текстовые поля с фокус-эффектами

#### 3. **Функционал сохранения и загрузки:**
- **Интеграция с сохранением карты** - ответы сохраняются вместе с картой
- **Автоматическая загрузка** ответов при загрузке карты
- Кнопка "Сохранить ответы" для ручного сохранения (независимо от карты)
- Кнопка "Загрузить мои ответы" для обновления данных
- Красивые уведомления об успешных операциях

#### 4. **Базовые возможности:**
- Возможность свернуть/развернуть панель
- Обработка ошибок и уведомления пользователя
- Проверка прав доступа (только для учеников)

#### 5. **База данных:**
- Создана таблица `student_answers` для хранения ответов
- Связь с таблицей пользователей через `user_id`
- Уникальность записи на пользователя (обновление при повторном сохранении)
- Отметки времени создания и обновления

#### 6. **Серверные endpoints:**
- `POST /answers/save` - сохранение ответов студента
- `GET /answers/load` - загрузка ответов студента
- `GET /admin/answers` - получение всех ответов (для админов/учителей)

## Как это работает

### Для учеников:
1. **Автоматически при входе:** Панель с вопросами появляется только у учеников
2. **Заполнение:** Ученик отвечает на вопросы в текстовых полях
3. **Работа с картой:** Размещает объекты на карте, отвечает на вопросы
4. **Сохранение:** При сохранении карты автоматически сохраняются и ответы на вопросы
5. **Загрузка:** При загрузке карты автоматически загружаются и ответы
6. **Дополнительно:** Можно сохранять/загружать ответы независимо от карты

### Для админов и учителей:
- Панель с вопросами **не отображается**
- Доступ к просмотру всех ответов через endpoint `/admin/answers`

## Технические детали

### Файлы:
- `front/js/questions.js` - JavaScript модуль для управления вопросами
- `front/css/styles.css` - стили для панели вопросов (добавлены новые)
- `front/index.html` - HTML разметка с панелью вопросов
- `server.js` - серверные endpoints для работы с ответами
- `config/database.js` - создание таблицы student_answers

### База данных:
```sql
CREATE TABLE student_answers (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    answers TEXT NOT NULL,
    created_at TEXT DEFAULT CURRENT_TIMESTAMP,
    updated_at TEXT DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES Users(id) ON DELETE CASCADE,
    UNIQUE(user_id)
);
```

### API endpoints:

#### Сохранение ответов:
```
POST /answers/save
Headers: Cookie (JWT токен)
Body: { "answers": { "question1": "ответ...", ... } }
Response: { "success": true, "message": "Ответы успешно сохранены" }
```

#### Загрузка ответов:
```
GET /answers/load
Headers: Cookie (JWT токен)
Response: { 
    "success": true, 
    "answers": { "question1": "ответ...", ... },
    "created_at": "...",
    "updated_at": "..."
}
```

## Безопасность и проверки

1. **Аутентификация:** Все endpoints требуют JWT токен
2. **Авторизация:** Только студенты могут сохранять/загружать свои ответы
3. **Валидация:** Проверка формата данных на сервере
4. **Уникальность:** Один набор ответов на студента (обновление при повторном сохранении)

## Пользовательский опыт

- ✅ Красивый современный дизайн
- ✅ Удобные анимации и переходы
- ✅ Информативные уведомления
- ✅ Автоматическое сохранение и загрузка
- ✅ Возможность свернуть панель
- ✅ Адаптивность для мобильных устройств

Функционал полностью готов к использованию! 