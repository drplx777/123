<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map Application</title>
    <link rel="stylesheet" href="./leaflet/leaflet.css">
    <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
    <div id="auth-container" class="auth-container">
        <div class="auth-form">
            <h2>–í—Ö–æ–¥</h2>
            <div class="error" style="display: none;"></div>
            <input type="email" id="username" placeholder="Email" />
            <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å" />
            <button id="auth-submit">–í–æ–π—Ç–∏</button>
            <div class="switch-mode">
                –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <span id="switch-auth">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</span>
            </div>
            <div id="registration-extra-fields" style="display: none;">
            </div>
        </div>
    </div>

    <div id="map-container" class="map-container" style="display: none;">
        <div id="map"></div>
        <div class="controls">
            <div class="search-box">
                <input type="text" id="search-input" placeholder="Search">
                <button id="search-btn">Search</button>
            </div>
            <div class="tools">
                <button id="add-marker" title="Marker">M</button>
                <button id="add-line" title="Line">L</button>
                <button id="add-polygon" title="Polygon">P</button>
                <button id="delete-object" title="Delete">D</button>
                <button id="clear-all" title="Clear">C</button>
                <button id="cancel-tool" title="–û—Ç–º–µ–Ω–∏—Ç—å –≤—ã–±–æ—Ä" style="background: #eee;">‚úï</button>
            </div>
            <div class="name-editor" style="margin-top: 10px; display: block !important; visibility: visible !important;">
                <input type="text" id="object-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞..." style="width: 100%; padding: 8px; margin-bottom: 5px; display: block !important; visibility: visible !important;">
                <button id="save-name" style="width: 100%; padding: 8px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; display: block !important; visibility: visible !important;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ</button>
            </div>
            <div class="file-panel">
                <input type="text" id="save-file-name" placeholder="File name...">
                <button id="save-map">Save</button>
                <select id="load-file-name">
                    <option value="">Select file...</option>
                </select>
                <button id="load-map">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                <button id="delete-file">–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</button>
            </div>
            <div id="admin-file-panel" class="admin-panel" style="display: none;">
                <h3>Admin Panel - Files</h3>
                <div class="admin-files">
                    <select id="admin-file-list" size="5">
                        <option value="">Select user file...</option>
                    </select>
                    <button id="admin-load-file">Load Selected File</button>
                    <button id="admin-view-answers">–ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç–≤–µ—Ç–æ–≤</button>
                </div>
            </div>
            <div id="admin-role-panel" class="admin-role-panel" style="display: none;">
                <h3>Admin Panel - Roles</h3>
                <div id="user-list"></div>
                <div>
                    <select id="admin-user-list" style="width: 100%; margin-bottom: 5px;">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...</option>
                    </select>
                    <select id="admin-role-select">
                        <option value="student">–£—á–µ–Ω–∏–∫</option>
                        <option value="teacher">–£—á–∏—Ç–µ–ª—å</option>
                        <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                    </select>
                    <button id="admin-update-role">–û–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª—å</button>
                </div>
            </div>
            <div class="coordinates">
                Latitude: <span id="lat">0</span>, Longitude: <span id="lng">0</span>
            </div>
            <div id="help-text"></div>
            <div id="error-message" style="color: red;"></div>
            <div id="current-file" style="margin-top: 10px; font-weight: bold;"></div>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ –¥–ª—è —É—á–µ–Ω–∏–∫–æ–≤ -->
        <div id="student-questions" class="student-questions-panel" style="display: none;">
            <h3>–í–æ–ø—Ä–æ—Å—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞</h3>
            <div class="questions-container">
                <div class="question-item">
                    <label for="question1">1. –û–±—ä—è—Å–Ω–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã —Ä–∞–∑–≤–∏—Ç–∏—è –≥–æ—Ä–æ–¥–∞.</label>
                    <textarea id="question1" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç..."></textarea>
                </div>
                
                <div class="question-item">
                    <label for="question2">2. –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–µ —Ä–æ–ª—å –ø—Ä–∏—Ä–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π –∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏ –≥–æ—Ä–æ–¥–∞ –∏ –∂–∏–∑–Ω–∏ –≥–æ—Ä–æ–∂–∞–Ω.</label>
                    <textarea id="question2" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç..."></textarea>
                </div>
                
                <div class="question-item">
                    <label for="question3">3. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å–æ—Ü–∏–∞–ª—å–Ω–æ-—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã —Ä–∞–∑–≤–∏—Ç–∏—è –≥–æ—Ä–æ–¥–∞.</label>
                    <textarea id="question3" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç..."></textarea>
                </div>
                
                <div class="question-item">
                    <label for="question4">4. –î–∞–π—Ç–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É –Ω–∞—Å–µ–ª–µ–Ω–∏—é –∏ —Ç—Ä—É–¥–æ–≤—ã–º —Ä–µ—Å—É—Ä—Å–∞–º –≥–æ—Ä–æ–¥–∞.</label>
                    <textarea id="question4" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç..."></textarea>
                </div>
                
                <div class="question-item">
                    <label for="question5">5. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –Ω–∞—Ä–æ–¥–Ω–æ—Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≥–æ—Ä–æ–¥–∞.</label>
                    <textarea id="question5" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç..."></textarea>
                </div>
                
                <div class="question-item">
                    <label for="question6">6. –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–µ –≤–Ω—É—Ç—Ä–∏–≥–æ—Ä–æ–¥—Å–∫–æ–µ —Ä–∞—Å—Å–µ–ª–µ–Ω–∏–µ, –∏–ª–∏ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∞–ª—å–Ω—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –≥–æ—Ä–æ–¥–∞.</label>
                    <textarea id="question6" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç..."></textarea>
                </div>
                
                <div class="question-item">
                    <label for="question7">7. –û–ø–∏—à–∏—Ç–µ –≥–æ—Ä–æ–¥ –≤ —Å–∏—Å—Ç–µ–º–µ —Ä–∞—Å—Å–µ–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω—ã –∫ –∫–æ—Ç–æ—Ä–æ–π –æ–Ω –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç.</label>
                    <textarea id="question7" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç..."></textarea>
                </div>
                
                <div class="question-item">
                    <label for="question8">8. –û–ø–∏—à–∏—Ç–µ –≥–æ—Ä–æ–¥ –∏ –µ–≥–æ –æ–∫—Ä—É–∂–∞—é—â—É—é —Å—Ä–µ–¥—É.</label>
                    <textarea id="question8" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç..."></textarea>
                </div>
                
                <div class="question-item">
                    <label for="question9">9. –í—ã—è–≤–∏—Ç–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã —Ä–∞–∑–≤–∏—Ç–∏—è.</label>
                    <textarea id="question9" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç..."></textarea>
                </div>
                
                <div class="questions-info">
                    <p style="margin: 15px 0 0 0; font-size: 14px; color: #666; text-align: center; font-style: italic;">
                        üí° –û—Ç–≤–µ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –∫–∞—Ä—Ç–æ–π
                    </p>
                </div>
            </div>
        </div>
        
        <div class="user-info">
            <span id="username-display"></span>
            <button id="logout-btn">–í—ã–π—Ç–∏</button>
            <button id="test-questions-btn" style="margin-left: 10px; background: #667eea; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer;">–í–æ–ø—Ä–æ—Å—ã</button>
        </div>
    </div>
    <div id="admin-panel" style="display: none;">
        <h2>Admin Panel</h2>
        <select id="admin-file-list"></select>
        <button id="admin-load-file">Load File</button>
        <button id="admin-delete-file">Delete Selected File</button>
        <button id="admin-delete-all-files">Delete All Files</button>
        <p id="error-message"></p>
    </div>
    <div id="file-management" class="auth-section" style="display: none;">
        <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏</h2>
        <label for="load-file-name">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏:</label>
        <select id="load-file-name"></select>
        <button id="load-map">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
        <ul id="file-list"></ul>
        <button id="delete-selected-file">–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</button>
    </div>
    <script src="leaflet/leaflet.js"></script>
    <script type="module" src="js/auth.js"></script>
    <script type="module" src="js/questions.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>